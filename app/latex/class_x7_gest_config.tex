\hypertarget{class_x7_gest_config}{}\doxysection{X7\+Gest\+Config Class Reference}
\label{class_x7_gest_config}\index{X7GestConfig@{X7GestConfig}}
Inheritance diagram for X7\+Gest\+Config\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_x7_gest_config}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_x7_gest_config_1_1config_ip_v4}{config\+Ip\+V4}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_x7_gest_config_aae3c329020dda9abd2ca6cf8567aa3e1}\label{class_x7_gest_config_aae3c329020dda9abd2ca6cf8567aa3e1}} 
enum {\bfseries mode\+Ip\+V4} \{ {\bfseries D\+H\+CP}, 
{\bfseries F\+IX}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}{start\+X7\+Gest\+Config}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}{X7\+Gest\+Config\+::start\+X7\+Gest\+Config}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_a7de50f2def17dd31f02e5f9b7f3f9f70}{update\+Date\+Time\+Ntp}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a7de50f2def17dd31f02e5f9b7f3f9f70}{X7\+Gest\+Config\+::update\+Date\+Time\+Ntp}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_af0686ac04fa81c8c2a082ccfe0124561}{set\+Host\+Name}} (Q\+String name)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_af0686ac04fa81c8c2a082ccfe0124561}{X7\+Gest\+Config\+::set\+Host\+Name}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}{set\+Ip\+V4\+Config}} (mode\+Ip\+V4 mode, \mbox{\hyperlink{struct_x7_gest_config_1_1config_ip_v4}{config\+Ip\+V4}} config)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}{X7\+Gest\+Config\+::set\+Ip\+V4\+Config}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_a76c52d0d7de3c074b3ef2c9fac977993}{x7\+Gest\+Config\+\_\+set\+Wifi}} (Q\+String ssid, Q\+String psk)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a76c52d0d7de3c074b3ef2c9fac977993}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+Wifi}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_aca8330d10e557e3bc418367bb6d44429}{x7\+Gest\+Config\+\_\+init\+Wifi}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_aca8330d10e557e3bc418367bb6d44429}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+Wifi}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_aac3c14a50328b282a91ba0a7ed0b439e}{x7\+Gest\+Config\+\_\+set\+\_\+mode\+\_\+network}} (int mode, Q\+String nom, Q\+String ip, Q\+String netmask, Q\+String gateway, Q\+String dns1, Q\+String dns2)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_aac3c14a50328b282a91ba0a7ed0b439e}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+\_\+mode\+\_\+network}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_a3545a3fcc3f89d31f964ae5d80ea0b8b}{x7\+Gest\+Config\+\_\+init\+\_\+mode\+\_\+network}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a3545a3fcc3f89d31f964ae5d80ea0b8b}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+\_\+mode\+\_\+network}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_ab8e32c7d27a77dc066d84fe676f6dc2b}{set\+Audio\+Volume}} (Q\+String a)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_ab8e32c7d27a77dc066d84fe676f6dc2b}{X7\+Gest\+Config\+::set\+Audio\+Volume}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a5fa9077f2d79948caeef488cd6e5cfeb}\label{class_x7_gest_config_a5fa9077f2d79948caeef488cd6e5cfeb}} 
void {\bfseries signal\+\_\+ihm\+\_\+init\+\_\+wifi} (Q\+Variant, Q\+Variant)
\item 
\mbox{\Hypertarget{class_x7_gest_config_aa4b7baf5b509da1cce9aa664a4dbabed}\label{class_x7_gest_config_aa4b7baf5b509da1cce9aa664a4dbabed}} 
void {\bfseries signal\+\_\+ihm\+\_\+init\+\_\+mode\+\_\+network} (Q\+Variant, Q\+Variant, Q\+Variant, Q\+Variant, Q\+Variant, Q\+Variant)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_x7_gest_config_a1274e9ec199003dae094e8a40ed056d9}{X7\+Gest\+Config}} (Q\+Object $\ast$parent=nullptr)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a1274e9ec199003dae094e8a40ed056d9}{X7\+Gest\+Config\+::\+X7\+Gest\+Config}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_x7_gest_config_a2800cf72efd5902e0ab829c667d18f89}{ouvrir\+Bdd}} (const Q\+String \&bdd\+Name)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a2800cf72efd5902e0ab829c667d18f89}{X7\+Gest\+Config\+::ouvrir\+Bdd}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_x7_gest_config_a7b73380cfcfb6680a99d9dca06a722e4}{ferme\+Bdd}} (Q\+String bdd\+Name)
\begin{DoxyCompactList}\small\item\em (N\+OT U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a7b73380cfcfb6680a99d9dca06a722e4}{X7\+Gest\+Config\+::ferme\+Bdd}} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_ac7af6a036e4ce65cf0513185b09eb06a}{custom\+Event}} (Q\+Event $\ast$event)
\begin{DoxyCompactList}\small\item\em (N\+OT U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_ac7af6a036e4ce65cf0513185b09eb06a}{X7\+Gest\+Config\+::custom\+Event}} \end{DoxyCompactList}\item 
quint32 \mbox{\hyperlink{class_x7_gest_config_a2665183dd5e9c1c22ec56455604d9e8d}{get\+Ip\+Local}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a2665183dd5e9c1c22ec56455604d9e8d}{X7\+Gest\+Config\+::get\+Ip\+Local}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_x7_gest_config_abe471a0884e615c322def7e721e4c016}{dhcp}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_abe471a0884e615c322def7e721e4c016}{X7\+Gest\+Config\+::dhcp}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_a5621623ea5470165b06a90b4286ec6e5}{x7\+Gest\+Config\+\_\+set\+\_\+lecteur\+\_\+badge}} (Q\+String lecteur, Q\+String option, Q\+String masque, Q\+String format)
\begin{DoxyCompactList}\small\item\em (N\+O\+T\+\_\+\+U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a5621623ea5470165b06a90b4286ec6e5}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+\_\+lecteur\+\_\+badge}} \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_x7_gest_config_a9a00adb58db4be30a2ce5314404395e4}\label{class_x7_gest_config_a9a00adb58db4be30a2ce5314404395e4}} 
void \mbox{\hyperlink{class_x7_gest_config_a9a00adb58db4be30a2ce5314404395e4}{x7\+Gest\+Config\+\_\+init\+\_\+lecteur\+\_\+badge}} ()
\begin{DoxyCompactList}\small\item\em (N\+O\+T\+\_\+\+U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a9a00adb58db4be30a2ce5314404395e4}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+\_\+lecteur\+\_\+badge}} \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_x7_port_serie}{X7\+Port\+Serie}} $\ast$ \mbox{\hyperlink{class_x7_gest_config_a2d0819bb560a160fa52d076e6ffa63e7}{get\+Port\+Serie\+Lecteur}} () const
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a2d0819bb560a160fa52d076e6ffa63e7}{X7\+Gest\+Config\+::get\+Port\+Serie\+Lecteur}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_x7_port_serie}{X7\+Port\+Serie}} $\ast$ \mbox{\hyperlink{class_x7_gest_config_af21d89d3b01091d3d579ca61e42ff632}{get\+Port\+Serie\+Service\+Device}} () const
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_af21d89d3b01091d3d579ca61e42ff632}{X7\+Gest\+Config\+::get\+Port\+Serie\+Service\+Device}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_x7_gest_config_af70c0aa761a8dcf3c59d34ce97585787}{read\+Config}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_af70c0aa761a8dcf3c59d34ce97585787}{X7\+Gest\+Config\+::read\+Config}}. \end{DoxyCompactList}\item 
Q\+String \mbox{\hyperlink{class_x7_gest_config_a71fa6fc03213116a6e421cb7312f456f}{get\+Connman\+Wired\+Service}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a71fa6fc03213116a6e421cb7312f456f}{X7\+Gest\+Config\+::get\+Connman\+Wired\+Service}} utilisé dans \mbox{\hyperlink{class_x7_gest_config_abe471a0884e615c322def7e721e4c016}{dhcp()}} et \mbox{\hyperlink{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}{set\+Ip\+V4\+Config()}} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_ad3ff686432c6e8843c4f6b8d78d98254}{x7\+Gest\+Config\+\_\+init\+\_\+divers}} (void)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_ad3ff686432c6e8843c4f6b8d78d98254}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+\_\+divers}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_x7_gest_config}{X7\+Gest\+Config}} $\ast$ \mbox{\hyperlink{class_x7_gest_config_ad1ade6efdfff247aae670685db8726a3}{get\+Instance}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_ad1ade6efdfff247aae670685db8726a3}{X7\+Gest\+Config\+::get\+Instance}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_x7_gest_config_aedfb0b3271216f2c9fc62803f15f7184}\label{class_x7_gest_config_aedfb0b3271216f2c9fc62803f15f7184}} 
\mbox{\hyperlink{class_q_serial_port}{Q\+Serial\+Port}} $\ast$ {\bfseries port}
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a0635cddd1d3785091719ae3f4313e323}\label{class_x7_gest_config_a0635cddd1d3785091719ae3f4313e323}} 
static Q\+String {\bfseries bdd\+Setup\+Name} = \char`\"{}database\+\_\+setup\char`\"{}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a0d0de918753cfb1d38ea8e009429d632}\label{class_x7_gest_config_a0d0de918753cfb1d38ea8e009429d632}} 
static Q\+String {\bfseries bdd\+Badge\+Name} = \char`\"{}database\+\_\+badge\char`\"{}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a8249ce46e448326c309079fd53ea80ad}\label{class_x7_gest_config_a8249ce46e448326c309079fd53ea80ad}} 
static \mbox{\hyperlink{class_x7_gest_config}{X7\+Gest\+Config}} $\ast$ {\bfseries instance} = 0
\item 
\mbox{\Hypertarget{class_x7_gest_config_a79a577ec9713feda12bda9a480dc5e44}\label{class_x7_gest_config_a79a577ec9713feda12bda9a480dc5e44}} 
static log4cpp\+::\+Category $\ast$ {\bfseries log4cpp} = \&log4cpp\+::\+Category\+::get\+Instance(\char`\"{}X7\+Gest\+Config\char`\"{})
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a119006e89eeffd424e1fd8a256f46b26}\label{class_x7_gest_config_a119006e89eeffd424e1fd8a256f46b26}} 
void \mbox{\hyperlink{class_x7_gest_config_a119006e89eeffd424e1fd8a256f46b26}{init\+Ts\+Calibrate}} ()
\begin{DoxyCompactList}\small\item\em (N\+OT U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a119006e89eeffd424e1fd8a256f46b26}{X7\+Gest\+Config\+::init\+Ts\+Calibrate}} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_a4cc994164f558d34504389942a27d173}{init\+Host\+Name}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a4cc994164f558d34504389942a27d173}{X7\+Gest\+Config\+::init\+Host\+Name}}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_x7_gest_config_a0fa05379259e25898b95b4aaefb1faa5}\label{class_x7_gest_config_a0fa05379259e25898b95b4aaefb1faa5}} 
void \mbox{\hyperlink{class_x7_gest_config_a0fa05379259e25898b95b4aaefb1faa5}{ts\+Calibrate}} ()
\begin{DoxyCompactList}\small\item\em (N\+OT U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a0fa05379259e25898b95b4aaefb1faa5}{X7\+Gest\+Config\+::ts\+Calibrate}} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_a9c1751dda67fc7d7dc9f50cac59e0f74}{priv\+Update\+Date\+Time}} (const Q\+Date\+Time $\ast$date\+Time)
\begin{DoxyCompactList}\small\item\em (N\+O\+T\+\_\+\+U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a9c1751dda67fc7d7dc9f50cac59e0f74}{X7\+Gest\+Config\+::priv\+Update\+Date\+Time}} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_x7_gest_config_a7f2003d4045246a1877996f4a1953380}{quitter}} ()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_a7f2003d4045246a1877996f4a1953380}{X7\+Gest\+Config\+::quitter}}. \end{DoxyCompactList}\item 
Q\+String \mbox{\hyperlink{class_x7_gest_config_aeaef76cedca301bc0a0f0549e3f5bd56}{binary\+Octets\+To\+Decimal}} (Q\+String \&I\+Pbinary)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_x7_gest_config_aeaef76cedca301bc0a0f0549e3f5bd56}{X7\+Gest\+Config\+::binary\+Octets\+To\+Decimal}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_x7_gest_config_acf4449bd69875efdd1c62b6de1cbe255}\label{class_x7_gest_config_acf4449bd69875efdd1c62b6de1cbe255}} 
int {\bfseries \+\_\+audio\+Volume}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a76b16557570e488df870f59f5442c7e0}\label{class_x7_gest_config_a76b16557570e488df870f59f5442c7e0}} 
Q\+Timer $\ast$ {\bfseries timer\+\_\+ntp}
\item 
\mbox{\Hypertarget{class_x7_gest_config_acb1f965ce94f7fad611fb8d8add08157}\label{class_x7_gest_config_acb1f965ce94f7fad611fb8d8add08157}} 
\mbox{\hyperlink{class_x7_port_serie}{X7\+Port\+Serie}} $\ast$ {\bfseries \+\_\+port\+Serie\+Lecteur}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a303bf9d9f7fff2ec1196de8c17e1e0a3}\label{class_x7_gest_config_a303bf9d9f7fff2ec1196de8c17e1e0a3}} 
\mbox{\hyperlink{class_x7_port_serie}{X7\+Port\+Serie}} $\ast$ {\bfseries \+\_\+port\+Serie\+Service\+Device}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a639058cbfb0e3363db645911955789d3}\label{class_x7_gest_config_a639058cbfb0e3363db645911955789d3}} 
Q\+String {\bfseries serveur\+\_\+ntp}
\item 
\mbox{\Hypertarget{class_x7_gest_config_a607e2f0f0a439ae2da5b26d34dd65226}\label{class_x7_gest_config_a607e2f0f0a439ae2da5b26d34dd65226}} 
Q\+String {\bfseries cadence\+\_\+ntp}
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_x7_gest_config_a1274e9ec199003dae094e8a40ed056d9}\label{class_x7_gest_config_a1274e9ec199003dae094e8a40ed056d9}} 
\index{X7GestConfig@{X7GestConfig}!X7GestConfig@{X7GestConfig}}
\index{X7GestConfig@{X7GestConfig}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{X7GestConfig()}{X7GestConfig()}}
{\footnotesize\ttfamily X7\+Gest\+Config\+::\+X7\+Gest\+Config (\begin{DoxyParamCaption}\item[{Q\+Object $\ast$}]{parent = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



\mbox{\hyperlink{class_x7_gest_config_a1274e9ec199003dae094e8a40ed056d9}{X7\+Gest\+Config\+::\+X7\+Gest\+Config}}. 


\begin{DoxyParams}{Parameters}
{\em parent} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{36                                           : QObject(parent)}
\DoxyCodeLine{37 \{}
\DoxyCodeLine{38     log4cpp-\/>debug(\textcolor{stringliteral}{"constructeur"});}
\DoxyCodeLine{39     \textcolor{comment}{//Demarrage automatique du gestionnaire après sont instanciation.}}
\DoxyCodeLine{40     QTimer::singleShot(10, \textcolor{keyword}{this}, SLOT(\mbox{\hyperlink{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}{startX7GestConfig}}()));}
\DoxyCodeLine{41     \_portSerieLecteur = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{42     \_audioVolume=1;}
\DoxyCodeLine{43 }
\DoxyCodeLine{44 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_x7_gest_config_aeaef76cedca301bc0a0f0549e3f5bd56}\label{class_x7_gest_config_aeaef76cedca301bc0a0f0549e3f5bd56}} 
\index{X7GestConfig@{X7GestConfig}!binaryOctetsToDecimal@{binaryOctetsToDecimal}}
\index{binaryOctetsToDecimal@{binaryOctetsToDecimal}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{binaryOctetsToDecimal()}{binaryOctetsToDecimal()}}
{\footnotesize\ttfamily Q\+String X7\+Gest\+Config\+::binary\+Octets\+To\+Decimal (\begin{DoxyParamCaption}\item[{Q\+String \&}]{I\+Pbinary }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



\mbox{\hyperlink{class_x7_gest_config_aeaef76cedca301bc0a0f0549e3f5bd56}{X7\+Gest\+Config\+::binary\+Octets\+To\+Decimal}}. 


\begin{DoxyParams}{Parameters}
{\em I\+Pbinary} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{599 \{}
\DoxyCodeLine{600     QStringList netAddressList;}
\DoxyCodeLine{601     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 32; i+=8)}
\DoxyCodeLine{602     \{}
\DoxyCodeLine{603         QString intOctet = QString::number(QStringRef(\&IPbinary, i, 8).toString().toInt(\textcolor{keyword}{nullptr}, 2));}
\DoxyCodeLine{604         netAddressList.append(intOctet);}
\DoxyCodeLine{605     \}}
\DoxyCodeLine{606 }
\DoxyCodeLine{607     \textcolor{keywordflow}{return} netAddressList.join(\textcolor{stringliteral}{"."});}
\DoxyCodeLine{608 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_ac7af6a036e4ce65cf0513185b09eb06a}\label{class_x7_gest_config_ac7af6a036e4ce65cf0513185b09eb06a}} 
\index{X7GestConfig@{X7GestConfig}!customEvent@{customEvent}}
\index{customEvent@{customEvent}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{customEvent()}{customEvent()}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::custom\+Event (\begin{DoxyParamCaption}\item[{Q\+Event $\ast$}]{event }\end{DoxyParamCaption})}



(N\+OT U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_ac7af6a036e4ce65cf0513185b09eb06a}{X7\+Gest\+Config\+::custom\+Event}} 


\begin{DoxyParams}{Parameters}
{\em event} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{913 \{}
\DoxyCodeLine{914     log4cpp-\/>debug(\textcolor{stringliteral}{"customEvent"});}
\DoxyCodeLine{915     \textcolor{keywordflow}{if}(X7CustomEvent::custom\_type()== event-\/>type())}
\DoxyCodeLine{916     \{}
\DoxyCodeLine{917         \mbox{\hyperlink{class_x7_custom_event}{X7CustomEvent}} *e = (\mbox{\hyperlink{class_x7_custom_event}{X7CustomEvent}} *)event;}
\DoxyCodeLine{918 }
\DoxyCodeLine{919         \textcolor{keywordflow}{switch} (e-\/>getEventType())}
\DoxyCodeLine{920         \{}
\DoxyCodeLine{921 }
\DoxyCodeLine{922         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{923             \textcolor{keywordflow}{break};}
\DoxyCodeLine{924 }
\DoxyCodeLine{925         \}}
\DoxyCodeLine{926     \}}
\DoxyCodeLine{927 }
\DoxyCodeLine{928 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_abe471a0884e615c322def7e721e4c016}\label{class_x7_gest_config_abe471a0884e615c322def7e721e4c016}} 
\index{X7GestConfig@{X7GestConfig}!dhcp@{dhcp}}
\index{dhcp@{dhcp}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{dhcp()}{dhcp()}}
{\footnotesize\ttfamily bool X7\+Gest\+Config\+::dhcp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\mbox{\hyperlink{class_x7_gest_config_abe471a0884e615c322def7e721e4c016}{X7\+Gest\+Config\+::dhcp}}. 


\begin{DoxyItemize}
\item utilisé dans \mbox{\hyperlink{class_form_controller_af327951d82e5b89df6e006c370540b7a}{Form\+Controller\+::service()}} et \mbox{\hyperlink{class_nom_controller_a35902d4d4ae198931944835f8855e3ec}{Nom\+Controller\+::read\+Xml\+\_\+nom()}} \begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{198 \{}
\DoxyCodeLine{199     QString eth\_id = \mbox{\hyperlink{class_x7_gest_config_a71fa6fc03213116a6e421cb7312f456f}{getConnmanWiredService}}();}
\DoxyCodeLine{200 }
\DoxyCodeLine{201     log4cpp-\/>info(QString(\textcolor{stringliteral}{"Dhcp Service Ethernet : \%1"}).arg(eth\_id).toStdString());}
\DoxyCodeLine{202 }
\DoxyCodeLine{203     QFileInfo cf(QString(\textcolor{stringliteral}{"/var/lib/connman/\%1/settings"}).arg(eth\_id));}
\DoxyCodeLine{204 }
\DoxyCodeLine{205     \textcolor{keywordflow}{if}(cf.exists())}
\DoxyCodeLine{206     \{}
\DoxyCodeLine{207         QSettings config(cf.absoluteFilePath(),QSettings::IniFormat);}
\DoxyCodeLine{208         config.beginGroup(eth\_id);}
\DoxyCodeLine{209         QString ipm = config.value(\textcolor{stringliteral}{"IPv4.method"}).toString();}
\DoxyCodeLine{210         log4cpp-\/>info(QString(\textcolor{stringliteral}{"Dhcp IPv4.method : \%1"}).arg(ipm).toStdString());}
\DoxyCodeLine{211 }
\DoxyCodeLine{212         \textcolor{keywordflow}{if}(ipm.compare(\textcolor{stringliteral}{"dhcp"})==0)}
\DoxyCodeLine{213             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{214     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{215     \{}
\DoxyCodeLine{216         log4cpp-\/>info(QString(\textcolor{stringliteral}{"Dhcp le fichier n'existe pas : \%1"}).arg(cf.absoluteFilePath()).toStdString());}
\DoxyCodeLine{217     \}}
\DoxyCodeLine{218     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{219 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a7b73380cfcfb6680a99d9dca06a722e4}\label{class_x7_gest_config_a7b73380cfcfb6680a99d9dca06a722e4}} 
\index{X7GestConfig@{X7GestConfig}!fermeBdd@{fermeBdd}}
\index{fermeBdd@{fermeBdd}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{fermeBdd()}{fermeBdd()}}
{\footnotesize\ttfamily bool X7\+Gest\+Config\+::ferme\+Bdd (\begin{DoxyParamCaption}\item[{Q\+String}]{bdd\+Name }\end{DoxyParamCaption})}



(N\+OT U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a7b73380cfcfb6680a99d9dca06a722e4}{X7\+Gest\+Config\+::ferme\+Bdd}} 


\begin{DoxyParams}{Parameters}
{\em bdd\+Name} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{891 \{}
\DoxyCodeLine{892     \textcolor{keywordtype}{bool} ok=\textcolor{keyword}{false};}
\DoxyCodeLine{893 }
\DoxyCodeLine{894     QSqlDatabase db = QSqlDatabase::database(bddName,\textcolor{keyword}{false});}
\DoxyCodeLine{895     \textcolor{keywordflow}{if}(!db.isValid())}
\DoxyCodeLine{896     \{}
\DoxyCodeLine{897         qCritical() << db.lastError().text();}
\DoxyCodeLine{898 }
\DoxyCodeLine{899     \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(db.isOpen())}
\DoxyCodeLine{900     \{}
\DoxyCodeLine{901         db.close();}
\DoxyCodeLine{902         qDebug() << \textcolor{stringliteral}{"Fermeture de la base :"} << bddName;}
\DoxyCodeLine{903         ok = \textcolor{keyword}{false};}
\DoxyCodeLine{904     \}}
\DoxyCodeLine{905     \textcolor{keywordflow}{return} ok;}
\DoxyCodeLine{906 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a71fa6fc03213116a6e421cb7312f456f}\label{class_x7_gest_config_a71fa6fc03213116a6e421cb7312f456f}} 
\index{X7GestConfig@{X7GestConfig}!getConnmanWiredService@{getConnmanWiredService}}
\index{getConnmanWiredService@{getConnmanWiredService}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{getConnmanWiredService()}{getConnmanWiredService()}}
{\footnotesize\ttfamily Q\+String X7\+Gest\+Config\+::get\+Connman\+Wired\+Service (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\mbox{\hyperlink{class_x7_gest_config_a71fa6fc03213116a6e421cb7312f456f}{X7\+Gest\+Config\+::get\+Connman\+Wired\+Service}} utilisé dans \mbox{\hyperlink{class_x7_gest_config_abe471a0884e615c322def7e721e4c016}{dhcp()}} et \mbox{\hyperlink{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}{set\+Ip\+V4\+Config()}} 

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{334 \{}
\DoxyCodeLine{335     log4cpp-\/>debug(\textcolor{stringliteral}{"getConnmanWiredService"});}
\DoxyCodeLine{336     QProcess *qProc = \textcolor{keyword}{new} QProcess(\textcolor{keyword}{this});}
\DoxyCodeLine{337 }
\DoxyCodeLine{338     QString eth\_id;}
\DoxyCodeLine{339 }
\DoxyCodeLine{340     qProc-\/>start(\textcolor{stringliteral}{"/bin/sh"}, \{ \textcolor{stringliteral}{"-\/c"} , \textcolor{stringliteral}{"connmanctl services | grep Wired | awk -\/F' ' '\{ print \$3 \}'"} \});}
\DoxyCodeLine{341     \textcolor{comment}{//FIXME ici bloquage loopevent pour 30 secondes max}}
\DoxyCodeLine{342     \textcolor{keywordflow}{if}(qProc-\/>waitForReadyRead())}
\DoxyCodeLine{343     \{}
\DoxyCodeLine{344         eth\_id = QString(qProc-\/>readAll()).simplified();}
\DoxyCodeLine{345 }
\DoxyCodeLine{346     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{347     \{}
\DoxyCodeLine{348         log4cpp-\/>warn(QString(qProc-\/>readAllStandardError()).toStdString());}
\DoxyCodeLine{349         log4cpp-\/>warn(QString(qProc-\/>readAllStandardOutput()).toStdString());}
\DoxyCodeLine{350         log4cpp-\/>warn(\textcolor{stringliteral}{"Pas d'eth0 trouvé"});}
\DoxyCodeLine{351     \}}
\DoxyCodeLine{352 }
\DoxyCodeLine{353     qProc-\/>waitForFinished(1000);}
\DoxyCodeLine{354 }
\DoxyCodeLine{355     \textcolor{keywordflow}{if}(qProc-\/>state() != QProcess::NotRunning)}
\DoxyCodeLine{356         qProc-\/>kill();}
\DoxyCodeLine{357 }
\DoxyCodeLine{358     qProc-\/>deleteLater();}
\DoxyCodeLine{359 }
\DoxyCodeLine{360 }
\DoxyCodeLine{361     \textcolor{keywordflow}{return} eth\_id;}
\DoxyCodeLine{362 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_ad1ade6efdfff247aae670685db8726a3}\label{class_x7_gest_config_ad1ade6efdfff247aae670685db8726a3}} 
\index{X7GestConfig@{X7GestConfig}!getInstance@{getInstance}}
\index{getInstance@{getInstance}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{getInstance()}{getInstance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_x7_gest_config}{X7\+Gest\+Config}} $\ast$ X7\+Gest\+Config\+::get\+Instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



\mbox{\hyperlink{class_x7_gest_config_ad1ade6efdfff247aae670685db8726a3}{X7\+Gest\+Config\+::get\+Instance}}. 

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{50 \{}
\DoxyCodeLine{51     log4cpp-\/>debug(\textcolor{stringliteral}{"getInstance"});}
\DoxyCodeLine{52     \textcolor{keywordflow}{if} ( !X7GestConfig::instance )}
\DoxyCodeLine{53     \{}
\DoxyCodeLine{54         \mbox{\hyperlink{class_x7_gest_config}{X7GestConfig}} * gestConfig = \textcolor{keyword}{new} \mbox{\hyperlink{class_x7_gest_config_a1274e9ec199003dae094e8a40ed056d9}{X7GestConfig}}();}
\DoxyCodeLine{55         X7GestConfig::instance = gestConfig;}
\DoxyCodeLine{56     \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{keywordflow}{return} X7GestConfig::instance;}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a2665183dd5e9c1c22ec56455604d9e8d}\label{class_x7_gest_config_a2665183dd5e9c1c22ec56455604d9e8d}} 
\index{X7GestConfig@{X7GestConfig}!getIpLocal@{getIpLocal}}
\index{getIpLocal@{getIpLocal}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{getIpLocal()}{getIpLocal()}}
{\footnotesize\ttfamily quint32 X7\+Gest\+Config\+::get\+Ip\+Local (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\mbox{\hyperlink{class_x7_gest_config_a2665183dd5e9c1c22ec56455604d9e8d}{X7\+Gest\+Config\+::get\+Ip\+Local}}. 


\begin{DoxyItemize}
\item appelé dans \mbox{\hyperlink{class_x7_gest_config_a7de50f2def17dd31f02e5f9b7f3f9f70}{X7\+Gest\+Config\+::update\+Date\+Time\+Ntp()}} \begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{167 \{}
\DoxyCodeLine{168     log4cpp-\/>debug(\textcolor{stringliteral}{"getIpLocal"});}
\DoxyCodeLine{169     \mbox{\hyperlink{class_x7_gest_config_af70c0aa761a8dcf3c59d34ce97585787}{readConfig}}();}
\DoxyCodeLine{170     quint32 ip;}
\DoxyCodeLine{171     ip=0;}
\DoxyCodeLine{172 }
\DoxyCodeLine{173     \textcolor{comment}{// Gestion d'une seule interface reseau Ipv4.}}
\DoxyCodeLine{174     \textcolor{keyword}{const} QHostAddress \&localhost = QHostAddress(QHostAddress::LocalHost);}
\DoxyCodeLine{175     \textcolor{keywordflow}{foreach}(QHostAddress hostAddress,QNetworkInterface::allAddresses())}
\DoxyCodeLine{176     \{}
\DoxyCodeLine{177         \textcolor{keywordflow}{if}(hostAddress != localhost \&\& hostAddress.protocol() == QAbstractSocket::IPv4Protocol)}
\DoxyCodeLine{178         \{}
\DoxyCodeLine{179             ip = hostAddress.toIPv4Address();}
\DoxyCodeLine{180             log4cpp-\/>debug( \textcolor{stringliteral}{"Adresse IP X7 :"} + hostAddress.toString().toStdString());}
\DoxyCodeLine{181             \textcolor{keywordflow}{break};}
\DoxyCodeLine{182         \}}
\DoxyCodeLine{183     \}}
\DoxyCodeLine{184 }
\DoxyCodeLine{185     \textcolor{keywordflow}{if}(ip==0)}
\DoxyCodeLine{186     \{}
\DoxyCodeLine{187         qWarning() << \textcolor{stringliteral}{"Ipv4 non initialisee"};}
\DoxyCodeLine{188         \textcolor{comment}{//QProcess::startDetached("dhcpcd", QStringList() << "-\/n");}}
\DoxyCodeLine{189     \}}
\DoxyCodeLine{190     \textcolor{keywordflow}{return} ip;}
\DoxyCodeLine{191 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a2d0819bb560a160fa52d076e6ffa63e7}\label{class_x7_gest_config_a2d0819bb560a160fa52d076e6ffa63e7}} 
\index{X7GestConfig@{X7GestConfig}!getPortSerieLecteur@{getPortSerieLecteur}}
\index{getPortSerieLecteur@{getPortSerieLecteur}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{getPortSerieLecteur()}{getPortSerieLecteur()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_x7_port_serie}{X7\+Port\+Serie}} $\ast$ X7\+Gest\+Config\+::get\+Port\+Serie\+Lecteur (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



\mbox{\hyperlink{class_x7_gest_config_a2d0819bb560a160fa52d076e6ffa63e7}{X7\+Gest\+Config\+::get\+Port\+Serie\+Lecteur}}. 


\begin{DoxyItemize}
\item appelé dans X7\+Gest\+Lecteur\+::init\+Lecteur() \begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{128 \{}
\DoxyCodeLine{129     log4cpp-\/>debug(\textcolor{stringliteral}{"getPortSerieLecteur"});}
\DoxyCodeLine{130     \textcolor{keywordflow}{return} \_portSerieLecteur;}
\DoxyCodeLine{131 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_af21d89d3b01091d3d579ca61e42ff632}\label{class_x7_gest_config_af21d89d3b01091d3d579ca61e42ff632}} 
\index{X7GestConfig@{X7GestConfig}!getPortSerieServiceDevice@{getPortSerieServiceDevice}}
\index{getPortSerieServiceDevice@{getPortSerieServiceDevice}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{getPortSerieServiceDevice()}{getPortSerieServiceDevice()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_x7_port_serie}{X7\+Port\+Serie}} $\ast$ X7\+Gest\+Config\+::get\+Port\+Serie\+Service\+Device (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



\mbox{\hyperlink{class_x7_gest_config_af21d89d3b01091d3d579ca61e42ff632}{X7\+Gest\+Config\+::get\+Port\+Serie\+Service\+Device}}. 


\begin{DoxyItemize}
\item appelé dans X7\+Carte\+I\+O\+::init\+Carte\+I\+O\+Port() \begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{139 \{}
\DoxyCodeLine{140     log4cpp-\/>debug(\textcolor{stringliteral}{"getPortSerieServiceDevice"});}
\DoxyCodeLine{141     \textcolor{keywordflow}{return} \_portSerieServiceDevice;}
\DoxyCodeLine{142 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a4cc994164f558d34504389942a27d173}\label{class_x7_gest_config_a4cc994164f558d34504389942a27d173}} 
\index{X7GestConfig@{X7GestConfig}!initHostName@{initHostName}}
\index{initHostName@{initHostName}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{initHostName()}{initHostName()}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::init\+Host\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



\mbox{\hyperlink{class_x7_gest_config_a4cc994164f558d34504389942a27d173}{X7\+Gest\+Config\+::init\+Host\+Name}}. 


\begin{DoxyItemize}
\item appelé à l\textquotesingle{}init \mbox{\hyperlink{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}{start\+X7\+Gest\+Config()}} 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{228 \{}
\DoxyCodeLine{229     log4cpp-\/>debug(\textcolor{stringliteral}{"initHostName"});}
\DoxyCodeLine{230     QString lhn = QHostInfo::localHostName();}
\DoxyCodeLine{231 }
\DoxyCodeLine{232     log4cpp-\/>info(QString(\textcolor{stringliteral}{"initHostName : \%1"}).arg(lhn).toStdString());}
\DoxyCodeLine{233     \textcolor{comment}{//FIXME ne pas utilise de global}}
\DoxyCodeLine{234     supervision\_thread.supervision.time2bii\_name=lhn.simplified();}
\DoxyCodeLine{235 }
\DoxyCodeLine{236 \textcolor{comment}{//    setHostName("azerty");}}
\DoxyCodeLine{237 \textcolor{comment}{//    setHostName("123");}}
\DoxyCodeLine{238 \textcolor{comment}{//    setHostName("\&zesd");}}
\DoxyCodeLine{239 \textcolor{comment}{//    setHostName("az\&zesd");}}
\DoxyCodeLine{240 \textcolor{comment}{//    setHostName("az zesd");}}
\DoxyCodeLine{241 \textcolor{comment}{//    setHostName("az-\/ze4");}}
\DoxyCodeLine{242 \textcolor{comment}{//    setHostName("x7");}}
\DoxyCodeLine{243 \textcolor{comment}{//    setHostName("Time2bii X7");}}
\DoxyCodeLine{244 \textcolor{comment}{//    setHostName("Météo");}}
\DoxyCodeLine{245 \textcolor{comment}{//    setHostName("x7.inetum.com");}}
\DoxyCodeLine{246 \textcolor{comment}{//    setHostName("x7..inetum.com");}}
\DoxyCodeLine{247 \textcolor{comment}{//    setHostName(".x7.inetum.com");}}
\DoxyCodeLine{248 \textcolor{comment}{//    setHostName("x7?inetum.com");}}
\DoxyCodeLine{249 }
\DoxyCodeLine{250     \textcolor{comment}{//code repris de la time2bii}}
\DoxyCodeLine{251 \textcolor{comment}{//    QProcess *qProc3 = new QProcess(this);}}
\DoxyCodeLine{252 \textcolor{comment}{//    qProc3-\/>start("hostname");}}
\DoxyCodeLine{253 \textcolor{comment}{//    qProc3-\/>waitForReadyRead();}}
\DoxyCodeLine{254 \textcolor{comment}{//    QString time2bii\_name=QString::fromLatin1(qProc3-\/>readAll()).simplified();}}
\DoxyCodeLine{255 \textcolor{comment}{//    log4cpp-\/>info(QString("hostname : \%1").arg(time2bii\_name).toStdString());}}
\DoxyCodeLine{256 \textcolor{comment}{//    //FIXME ne pas utilise de global}}
\DoxyCodeLine{257 \textcolor{comment}{//    supervision\_thread.supervision.time2bii\_name=time2bii\_name.simplified();}}
\DoxyCodeLine{258 \textcolor{comment}{//    qProc3-\/>close();}}
\DoxyCodeLine{259 \textcolor{comment}{//    qProc3-\/>deleteLater();}}
\DoxyCodeLine{260 }
\DoxyCodeLine{261 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a2800cf72efd5902e0ab829c667d18f89}\label{class_x7_gest_config_a2800cf72efd5902e0ab829c667d18f89}} 
\index{X7GestConfig@{X7GestConfig}!ouvrirBdd@{ouvrirBdd}}
\index{ouvrirBdd@{ouvrirBdd}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{ouvrirBdd()}{ouvrirBdd()}}
{\footnotesize\ttfamily bool X7\+Gest\+Config\+::ouvrir\+Bdd (\begin{DoxyParamCaption}\item[{const Q\+String \&}]{bdd\+Name }\end{DoxyParamCaption})}



\mbox{\hyperlink{class_x7_gest_config_a2800cf72efd5902e0ab829c667d18f89}{X7\+Gest\+Config\+::ouvrir\+Bdd}}. 


\begin{DoxyItemize}
\item appelé à l\textquotesingle{}init \mbox{\hyperlink{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}{start\+X7\+Gest\+Config()}} 
\begin{DoxyParams}{Parameters}
{\em bdd\+Name} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{851 \{}
\DoxyCodeLine{852     log4cpp-\/>debug(\textcolor{stringliteral}{"ouvrirBdd"});}
\DoxyCodeLine{853     \textcolor{keywordtype}{bool} ok=\textcolor{keyword}{false};}
\DoxyCodeLine{854     qDebug() << \textcolor{stringliteral}{"Reprtoire de l app : "} << QDir::currentPath();}
\DoxyCodeLine{855     QFile bddFile;}
\DoxyCodeLine{856     \textcolor{keywordflow}{if}(bddName == bddSetupName)}
\DoxyCodeLine{857     bddFile.setFileName(\textcolor{stringliteral}{"/var/x7/etc/database\_setup.db"});}
\DoxyCodeLine{858     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(bddName == bddBadgeName)}
\DoxyCodeLine{859     bddFile.setFileName(\textcolor{stringliteral}{"/var/x7/contents/database\_badge.db"});}
\DoxyCodeLine{860 }
\DoxyCodeLine{861     \textcolor{keywordflow}{if}(bddFile.exists())}
\DoxyCodeLine{862     \{}
\DoxyCodeLine{863         QSqlDatabase db = QSqlDatabase::database(bddName,\textcolor{keyword}{false});}
\DoxyCodeLine{864         db.setDatabaseName(bddFile.fileName());}
\DoxyCodeLine{865 }
\DoxyCodeLine{866         \textcolor{keywordflow}{if}(!db.isValid())}
\DoxyCodeLine{867         \{}
\DoxyCodeLine{868             qCritical() << db.lastError().text();}
\DoxyCodeLine{869         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!db.open())}
\DoxyCodeLine{870         \{}
\DoxyCodeLine{871             qDebug() << \textcolor{stringliteral}{"Impossible d'ouvrir la base de donnée : "} << db.databaseName();}
\DoxyCodeLine{872         \}\textcolor{keywordflow}{else}}
\DoxyCodeLine{873         \{}
\DoxyCodeLine{874             qDebug() << \textcolor{stringliteral}{"Ouverture de la base : "} << db.databaseName();}
\DoxyCodeLine{875             ok=\textcolor{keyword}{true};}
\DoxyCodeLine{876         \}}
\DoxyCodeLine{877     \}\textcolor{keywordflow}{else}}
\DoxyCodeLine{878     \{}
\DoxyCodeLine{879         qCritical() << \textcolor{stringliteral}{"Fichier de base de données introuvable : \(\backslash\)n\(\backslash\)t"} << QDir::current().filePath(bddFile.fileName());}
\DoxyCodeLine{880     \}}
\DoxyCodeLine{881 }
\DoxyCodeLine{882     \textcolor{keywordflow}{return} ok;}
\DoxyCodeLine{883 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a9c1751dda67fc7d7dc9f50cac59e0f74}\label{class_x7_gest_config_a9c1751dda67fc7d7dc9f50cac59e0f74}} 
\index{X7GestConfig@{X7GestConfig}!privUpdateDateTime@{privUpdateDateTime}}
\index{privUpdateDateTime@{privUpdateDateTime}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{privUpdateDateTime()}{privUpdateDateTime()}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::priv\+Update\+Date\+Time (\begin{DoxyParamCaption}\item[{const Q\+Date\+Time $\ast$}]{date\+Time }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



(N\+O\+T\+\_\+\+U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a9c1751dda67fc7d7dc9f50cac59e0f74}{X7\+Gest\+Config\+::priv\+Update\+Date\+Time}} 


\begin{DoxyParams}{Parameters}
{\em date\+Time} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{826 \{}
\DoxyCodeLine{827     log4cpp-\/>debug(\textcolor{stringliteral}{"privUpdateDateTime"});}
\DoxyCodeLine{828     QDateTime now = QDateTime::currentDateTime();}
\DoxyCodeLine{829     qDebug() << \textcolor{stringliteral}{"Heure system: "} << now.toString(\textcolor{stringliteral}{"dd/MM/yyyy hh:mm:ss -\/ delta "}) << (dateTime-\/>toTime\_t() -\/ now.toTime\_t()) ;}
\DoxyCodeLine{830 }
\DoxyCodeLine{831     \textcolor{comment}{//Mise a l'heure si +-\/2 secondes de différence}}
\DoxyCodeLine{832     \textcolor{keywordflow}{if} (dateTime-\/>toTime\_t() > now.toTime\_t()+2 || dateTime-\/>toTime\_t() < now.toTime\_t()-\/2)}
\DoxyCodeLine{833     \{}
\DoxyCodeLine{834         qDebug() << \textcolor{stringliteral}{"Mise a l'heure : "} << dateTime-\/>toString(\textcolor{stringliteral}{"dd/MM/yyyy hh:mm:ss"});}
\DoxyCodeLine{835         QProcess proc;}
\DoxyCodeLine{836         proc.start(\textcolor{stringliteral}{"date"}, QStringList() << \textcolor{stringliteral}{"-\/s"} << dateTime-\/>toString(\textcolor{stringliteral}{"yyyy-\/MM-\/dd hh:mm:ss"}));}
\DoxyCodeLine{837         proc.waitForFinished();}
\DoxyCodeLine{838         qDebug() << \textcolor{stringliteral}{"date message std : "} << proc.readAllStandardOutput();}
\DoxyCodeLine{839         qDebug() << \textcolor{stringliteral}{"date erreur retour : "} << proc.readAllStandardError();}
\DoxyCodeLine{840         proc.startDetached(\textcolor{stringliteral}{"hwclock"}, QStringList() << \textcolor{stringliteral}{"-\/-\/systohc"});}
\DoxyCodeLine{841     \}}
\DoxyCodeLine{842 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a7f2003d4045246a1877996f4a1953380}\label{class_x7_gest_config_a7f2003d4045246a1877996f4a1953380}} 
\index{X7GestConfig@{X7GestConfig}!quitter@{quitter}}
\index{quitter@{quitter}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{quitter()}{quitter()}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::quitter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



\mbox{\hyperlink{class_x7_gest_config_a7f2003d4045246a1877996f4a1953380}{X7\+Gest\+Config\+::quitter}}. 


\begin{DoxyItemize}
\item appelé dans (N\+OT U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a0fa05379259e25898b95b4aaefb1faa5}{X7\+Gest\+Config\+::ts\+Calibrate}} 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{118 \{}
\DoxyCodeLine{119     QTimer::singleShot( 0, qApp, SLOT(quit()));}
\DoxyCodeLine{120 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_af70c0aa761a8dcf3c59d34ce97585787}\label{class_x7_gest_config_af70c0aa761a8dcf3c59d34ce97585787}} 
\index{X7GestConfig@{X7GestConfig}!readConfig@{readConfig}}
\index{readConfig@{readConfig}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{readConfig()}{readConfig()}}
{\footnotesize\ttfamily bool X7\+Gest\+Config\+::read\+Config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\mbox{\hyperlink{class_x7_gest_config_af70c0aa761a8dcf3c59d34ce97585787}{X7\+Gest\+Config\+::read\+Config}}. 


\begin{DoxyItemize}
\item appelé à l\textquotesingle{}init \mbox{\hyperlink{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}{start\+X7\+Gest\+Config()}}, dans \mbox{\hyperlink{class_x7_gest_config_a2665183dd5e9c1c22ec56455604d9e8d}{get\+Ip\+Local()}}
\item appelé dans X7\+Gest\+Lecteur\+::init\+Lecteur()
\item appelé dans X7\+Carte\+I\+O\+::init\+Carte\+I\+O\+Port() \begin{DoxyReturn}{Returns}

\end{DoxyReturn}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{791 \{}
\DoxyCodeLine{792     log4cpp-\/>debug(\textcolor{stringliteral}{"readConfig"});}
\DoxyCodeLine{793     QSqlDatabase bddConfig = QSqlDatabase::database(bddSetupName,\textcolor{keyword}{false});}
\DoxyCodeLine{794     QSqlQuery queryConfig(bddConfig);}
\DoxyCodeLine{795     \textcolor{comment}{//QSqlQuery queryConfig2(bddConfig); //si besoin d'une requette en parallele.}}
\DoxyCodeLine{796 }
\DoxyCodeLine{797     queryConfig.clear();}
\DoxyCodeLine{798     queryConfig.prepare(\textcolor{stringliteral}{"SELECT * FROM badge"});}
\DoxyCodeLine{799     queryConfig.exec();}
\DoxyCodeLine{800     \textcolor{keywordflow}{if}(queryConfig.first())}
\DoxyCodeLine{801     \{}
\DoxyCodeLine{802         log4cpp-\/>debug(\textcolor{stringliteral}{"Lecture config lecteur badge"});}
\DoxyCodeLine{803         \mbox{\hyperlink{class_x7_gest_lecteur}{X7GestLecteur}} *gestLecteur = X7GestLecteur::getInstance();}
\DoxyCodeLine{804         \textcolor{keywordtype}{bool} *ok;}
\DoxyCodeLine{805 }
\DoxyCodeLine{806         \textcolor{comment}{//FIXME faire une struc des options de lecteur dans X7GestLecteur et l'utiliser ici.}}
\DoxyCodeLine{807         gestLecteur-\/>setLecteur(queryConfig.record().value(\textcolor{stringliteral}{"lecteur"}).toUInt(ok));}
\DoxyCodeLine{808         \textcolor{keywordflow}{if}(!\&ok) \{qCritical() << \textcolor{stringliteral}{"erreur de conversion X7GestConfig::initConfig Lecteur"};\}}
\DoxyCodeLine{809 }
\DoxyCodeLine{810         gestLecteur-\/>setOption(queryConfig.record().value(\textcolor{stringliteral}{"option"}).toUInt(ok));}
\DoxyCodeLine{811         \textcolor{keywordflow}{if}(!\&ok) \{qCritical() << \textcolor{stringliteral}{"erreur de conversion X7GestConfig::initConfig option"};\}}
\DoxyCodeLine{812 }
\DoxyCodeLine{813         gestLecteur-\/>setMasque(queryConfig.record().value(\textcolor{stringliteral}{"masque"}).toString());}
\DoxyCodeLine{814         gestLecteur-\/>setFormat(queryConfig.record().value(\textcolor{stringliteral}{"format"}).toString());}
\DoxyCodeLine{815         log4cpp-\/>debug(queryConfig.record().value(\textcolor{stringliteral}{"lecteur"}).toString().toStdString() + \textcolor{stringliteral}{" -\/ "} + queryConfig.record().value(\textcolor{stringliteral}{"option"}).toString().toStdString());}
\DoxyCodeLine{816 }
\DoxyCodeLine{817     \}}
\DoxyCodeLine{818     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{819 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_ab8e32c7d27a77dc066d84fe676f6dc2b}\label{class_x7_gest_config_ab8e32c7d27a77dc066d84fe676f6dc2b}} 
\index{X7GestConfig@{X7GestConfig}!setAudioVolume@{setAudioVolume}}
\index{setAudioVolume@{setAudioVolume}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{setAudioVolume}{setAudioVolume}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::set\+Audio\+Volume (\begin{DoxyParamCaption}\item[{Q\+String}]{a }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_ab8e32c7d27a77dc066d84fe676f6dc2b}{X7\+Gest\+Config\+::set\+Audio\+Volume}}. 


\begin{DoxyItemize}
\item permet de changer le volume de l\textquotesingle{}application par action utilisateur 
\begin{DoxyParams}{Parameters}
{\em a} & si 0 muet si 1 incrément entre les valeurs 10-\/100\%. \\
\hline
\end{DoxyParams}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{616 \{}
\DoxyCodeLine{617     log4cpp-\/>debug(\textcolor{stringliteral}{"audio\_set\_volume"});}
\DoxyCodeLine{618 }
\DoxyCodeLine{619     QString vol;}
\DoxyCodeLine{620     \textcolor{keywordflow}{if} (a.compare(\textcolor{stringliteral}{"1"})==0)}
\DoxyCodeLine{621     \{}
\DoxyCodeLine{622 }
\DoxyCodeLine{623         \textcolor{keywordflow}{switch} (\_audioVolume) \{}
\DoxyCodeLine{624         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{625             vol = \textcolor{stringliteral}{"10\%"};}
\DoxyCodeLine{626             \textcolor{keywordflow}{break};}
\DoxyCodeLine{627         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{628             vol = \textcolor{stringliteral}{"30\%"};}
\DoxyCodeLine{629             \textcolor{keywordflow}{break};}
\DoxyCodeLine{630         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{631             vol = \textcolor{stringliteral}{"50\%"};}
\DoxyCodeLine{632             \textcolor{keywordflow}{break};}
\DoxyCodeLine{633         \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{634             vol = \textcolor{stringliteral}{"70\%"};}
\DoxyCodeLine{635             \textcolor{keywordflow}{break};}
\DoxyCodeLine{636         \textcolor{keywordflow}{case} 5:}
\DoxyCodeLine{637             vol = \textcolor{stringliteral}{"80\%"};}
\DoxyCodeLine{638             \textcolor{keywordflow}{break};}
\DoxyCodeLine{639         \textcolor{keywordflow}{case} 6:}
\DoxyCodeLine{640             vol = \textcolor{stringliteral}{"90\%"};}
\DoxyCodeLine{641             \textcolor{keywordflow}{break};}
\DoxyCodeLine{642         \textcolor{keywordflow}{case} 7:}
\DoxyCodeLine{643             vol = \textcolor{stringliteral}{"95\%"};}
\DoxyCodeLine{644             \textcolor{keywordflow}{break};}
\DoxyCodeLine{645         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{646             \textcolor{keywordflow}{break};}
\DoxyCodeLine{647         \}}
\DoxyCodeLine{648     \}}
\DoxyCodeLine{649     \textcolor{keywordflow}{else} vol = \textcolor{stringliteral}{"0\%"};}
\DoxyCodeLine{650 }
\DoxyCodeLine{651     \textcolor{keywordflow}{if}(\_audioVolume<7)}
\DoxyCodeLine{652         \_audioVolume++;}
\DoxyCodeLine{653     \textcolor{keywordflow}{else}}
\DoxyCodeLine{654         \_audioVolume=1;}
\DoxyCodeLine{655 }
\DoxyCodeLine{656     \textcolor{comment}{//script qui joue sur volume amixer}}
\DoxyCodeLine{657     QString b=QString(\textcolor{stringliteral}{"./audio\_volume \%1"}).arg(vol);}
\DoxyCodeLine{658     log4cpp-\/>debug(b.toStdString());}
\DoxyCodeLine{659     QProcess *qProc = \textcolor{keyword}{new} QProcess(\textcolor{keyword}{this});}
\DoxyCodeLine{660     qProc-\/>startDetached(b);}
\DoxyCodeLine{661 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_af0686ac04fa81c8c2a082ccfe0124561}\label{class_x7_gest_config_af0686ac04fa81c8c2a082ccfe0124561}} 
\index{X7GestConfig@{X7GestConfig}!setHostName@{setHostName}}
\index{setHostName@{setHostName}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{setHostName}{setHostName}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::set\+Host\+Name (\begin{DoxyParamCaption}\item[{Q\+String}]{nom }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_af0686ac04fa81c8c2a082ccfe0124561}{X7\+Gest\+Config\+::set\+Host\+Name}}. 


\begin{DoxyItemize}
\item appelé dans \mbox{\hyperlink{class_x7_gest_config_aac3c14a50328b282a91ba0a7ed0b439e}{x7\+Gest\+Config\+\_\+set\+\_\+mode\+\_\+network()}}
\item utilisé à l\textquotesingle{}init de \mbox{\hyperlink{class_nom_controller_a8bb298a65a56c2f8f11e4840c3b8357b}{Nom\+Controller\+::\+Nom\+Controller()}} 
\begin{DoxyParams}{Parameters}
{\em nom} & \\
\hline
\end{DoxyParams}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{269 \{      }
\DoxyCodeLine{270     log4cpp-\/>debug(\textcolor{stringliteral}{"setHostName"});}
\DoxyCodeLine{271     \textcolor{comment}{//regexp pour les noms de machine RFC 1178}}
\DoxyCodeLine{272     \textcolor{comment}{//http://www.faqs.org/rfcs/rfc1178.html}}
\DoxyCodeLine{273     QRegExp rx(\textcolor{stringliteral}{"\string^(([a-\/zA-\/Z0-\/9]|[a-\/zA-\/Z0-\/9][a-\/zA-\/Z0-\/9\(\backslash\)\(\backslash\)-\/]*[a-\/zA-\/Z0-\/9])\(\backslash\)\(\backslash\).)*([A-\/Za-\/z0-\/9]|[A-\/Za-\/z0-\/9][A-\/Za-\/z0-\/9\(\backslash\)\(\backslash\)-\/]*[A-\/Za-\/z0-\/9])\$"});}
\DoxyCodeLine{274 }
\DoxyCodeLine{275     \textcolor{keywordflow}{if}(rx.exactMatch(nom))}
\DoxyCodeLine{276         log4cpp-\/>info(QString(\textcolor{stringliteral}{"setHostName \%1 : OK"}).arg(nom).toStdString());}
\DoxyCodeLine{277     \textcolor{keywordflow}{else}}
\DoxyCodeLine{278     \{}
\DoxyCodeLine{279         log4cpp-\/>warn(QString(\textcolor{stringliteral}{"setHostName \%1 : KO"}).arg(nom).toStdString());}
\DoxyCodeLine{280         \textcolor{keywordflow}{return};}
\DoxyCodeLine{281     \}}
\DoxyCodeLine{282 }
\DoxyCodeLine{283     QString lhn = QHostInfo::localHostName();}
\DoxyCodeLine{284 }
\DoxyCodeLine{285     \textcolor{comment}{//pas de maj si non identique}}
\DoxyCodeLine{286     \textcolor{keywordflow}{if} (lhn != nom)}
\DoxyCodeLine{287     \{}
\DoxyCodeLine{288         \textcolor{comment}{//on enregistre le hostname}}
\DoxyCodeLine{289         QFile out(\textcolor{stringliteral}{"/etc/hostname"});}
\DoxyCodeLine{290         \textcolor{keywordflow}{if} (out.open( QFile::WriteOnly))}
\DoxyCodeLine{291         \{}
\DoxyCodeLine{292             QTextStream stream\_out(\&out);}
\DoxyCodeLine{293             stream\_out << nom << endl;}
\DoxyCodeLine{294             stream\_out.flush();}
\DoxyCodeLine{295             out.close();}
\DoxyCodeLine{296             supervision\_thread.supervision.time2bii\_name=nom;}
\DoxyCodeLine{297         \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{298         \{}
\DoxyCodeLine{299             log4cpp-\/>warn(\textcolor{stringliteral}{"impossible d ouvrir /etc/hostname"});}
\DoxyCodeLine{300             \textcolor{keywordflow}{return};}
\DoxyCodeLine{301         \}}
\DoxyCodeLine{302 }
\DoxyCodeLine{303         \textcolor{comment}{//Execution du programme hostname pour modification}}
\DoxyCodeLine{304         QProcess *qProc = \textcolor{keyword}{new} QProcess(\textcolor{keyword}{this});}
\DoxyCodeLine{305         qProc-\/>start(\textcolor{stringliteral}{"hostname -\/F /etc/hostname"});}
\DoxyCodeLine{306         \textcolor{keywordflow}{if}(!qProc-\/>waitForFinished())}
\DoxyCodeLine{307         \{}
\DoxyCodeLine{308             log4cpp-\/>warn(QString(qProc-\/>readAllStandardError()).toStdString());}
\DoxyCodeLine{309             log4cpp-\/>warn(QString(qProc-\/>readAllStandardOutput()).toStdString());}
\DoxyCodeLine{310             log4cpp-\/>warn(\textcolor{stringliteral}{"erreur du programme hostname -\/F /etc/hostname"});}
\DoxyCodeLine{311         \}}
\DoxyCodeLine{312         qProc-\/>deleteLater();}
\DoxyCodeLine{313 }
\DoxyCodeLine{314         \textcolor{comment}{// -\/-\/-\/ verification -\/-\/-\/}}
\DoxyCodeLine{315         \textcolor{comment}{//TODO La vérification est en trop je pense.}}
\DoxyCodeLine{316 \textcolor{comment}{//        QProcess *qProc3 = new QProcess(this);}}
\DoxyCodeLine{317 \textcolor{comment}{//        qProc3-\/>start("hostname");}}
\DoxyCodeLine{318 \textcolor{comment}{//        qProc3-\/>waitForReadyRead();}}
\DoxyCodeLine{319 \textcolor{comment}{//        QString time2bii\_name = QString::fromLatin1(qProc3-\/>readAll()).simplified();}}
\DoxyCodeLine{320 \textcolor{comment}{//        supervision\_thread.supervision.time2bii\_name=time2bii\_name;}}
\DoxyCodeLine{321 \textcolor{comment}{//        qProc2-\/>waitForFinished();}}
\DoxyCodeLine{322 \textcolor{comment}{//        qProc3-\/>deleteLater();}}
\DoxyCodeLine{323     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{324         log4cpp-\/>info(QString(\textcolor{stringliteral}{"setHostName identique : \%1"}).arg(lhn).toStdString());}
\DoxyCodeLine{325 }
\DoxyCodeLine{326 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}\label{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}} 
\index{X7GestConfig@{X7GestConfig}!setIpV4Config@{setIpV4Config}}
\index{setIpV4Config@{setIpV4Config}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{setIpV4Config}{setIpV4Config}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::set\+Ip\+V4\+Config (\begin{DoxyParamCaption}\item[{mode\+Ip\+V4}]{mode,  }\item[{\mbox{\hyperlink{struct_x7_gest_config_1_1config_ip_v4}{config\+Ip\+V4}}}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}{X7\+Gest\+Config\+::set\+Ip\+V4\+Config}}. 


\begin{DoxyItemize}
\item methode pour activer le réseau D\+H\+CP ou statique IP
\item appelé à l\textquotesingle{}init de \mbox{\hyperlink{class_nom_controller_a8bb298a65a56c2f8f11e4840c3b8357b}{Nom\+Controller\+::\+Nom\+Controller()}} 
\begin{DoxyParams}{Parameters}
{\em mode} & \\
\hline
{\em config} & \\
\hline
\end{DoxyParams}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{372 \{}
\DoxyCodeLine{373     log4cpp-\/>debug(\textcolor{stringliteral}{"setIpV4Config"});}
\DoxyCodeLine{374 }
\DoxyCodeLine{375     \textcolor{keywordflow}{if} (mode == modeIpV4::FIX \&\& (config.ip.isEmpty() || config.netmask.isEmpty()))}
\DoxyCodeLine{376         \textcolor{keywordflow}{return};}
\DoxyCodeLine{377 }
\DoxyCodeLine{378     QProcess *qProc = \textcolor{keyword}{new} QProcess(\textcolor{keyword}{this});}
\DoxyCodeLine{379 }
\DoxyCodeLine{380     QString eth\_id = \mbox{\hyperlink{class_x7_gest_config_a71fa6fc03213116a6e421cb7312f456f}{getConnmanWiredService}}();}
\DoxyCodeLine{381 }
\DoxyCodeLine{382 }
\DoxyCodeLine{383     log4cpp-\/>info(QString(\textcolor{stringliteral}{"Service Ethernet : \%1"}).arg(eth\_id).toStdString());}
\DoxyCodeLine{384 }
\DoxyCodeLine{385 }
\DoxyCodeLine{386     \textcolor{keywordflow}{if}(mode == modeIpV4::DHCP)}
\DoxyCodeLine{387     \{}
\DoxyCodeLine{388         QString cmd = QString(\textcolor{stringliteral}{"connmanctl config \%1 -\/-\/ipv4 dhcp"}).arg(eth\_id);}
\DoxyCodeLine{389         log4cpp-\/>info(QString(\textcolor{stringliteral}{"cmd dhcp : \%1"}).arg(cmd).toStdString());}
\DoxyCodeLine{390 }
\DoxyCodeLine{391         qProc-\/>start(cmd);}
\DoxyCodeLine{392         \textcolor{comment}{//FIXME ici bloquage loopevent pour 30 secondes max}}
\DoxyCodeLine{393         \textcolor{keywordflow}{if}(!qProc-\/>waitForFinished())}
\DoxyCodeLine{394         \{}
\DoxyCodeLine{395             log4cpp-\/>warn(QString(qProc-\/>readAllStandardError()).toStdString());}
\DoxyCodeLine{396             log4cpp-\/>warn(QString(qProc-\/>readAllStandardOutput()).toStdString());}
\DoxyCodeLine{397             log4cpp-\/>warn(\textcolor{stringliteral}{"la configuration ipv4 dhcp a échoué"});}
\DoxyCodeLine{398         \}}
\DoxyCodeLine{399 }
\DoxyCodeLine{400     \}}
\DoxyCodeLine{401     \textcolor{keywordflow}{else} \textcolor{comment}{// en statique}}
\DoxyCodeLine{402     \{        }
\DoxyCodeLine{403         QString cmd = QString(\textcolor{stringliteral}{"connmanctl config \%1 -\/-\/ipv4 manual \%2 \%3 \%4"}).arg(eth\_id,config.ip,config.netmask,config.gateway);}
\DoxyCodeLine{404         \textcolor{keywordflow}{if}(!config.dns.isEmpty())}
\DoxyCodeLine{405         \{}
\DoxyCodeLine{406             cmd.append(QString(\textcolor{stringliteral}{" -\/-\/nameservers"}));}
\DoxyCodeLine{407             \textcolor{keywordflow}{foreach} (QString dns, config.dns)}
\DoxyCodeLine{408             \{}
\DoxyCodeLine{409                 cmd.append(QString(\textcolor{stringliteral}{" \%1"}).arg(dns));}
\DoxyCodeLine{410             \}}
\DoxyCodeLine{411         \}}
\DoxyCodeLine{412         log4cpp-\/>info(QString(\textcolor{stringliteral}{"cmd statique :\%1"}).arg(cmd).toStdString());}
\DoxyCodeLine{413 }
\DoxyCodeLine{414         qProc-\/>start(cmd);}
\DoxyCodeLine{415         \textcolor{comment}{//FIXME ici bloquage loopevent pour 30 secondes max}}
\DoxyCodeLine{416         \textcolor{keywordflow}{if}(!qProc-\/>waitForFinished())}
\DoxyCodeLine{417         \{}
\DoxyCodeLine{418             log4cpp-\/>warn(QString(qProc-\/>readAllStandardError()).toStdString());}
\DoxyCodeLine{419             log4cpp-\/>warn(QString(qProc-\/>readAllStandardOutput()).toStdString());}
\DoxyCodeLine{420             log4cpp-\/>warn(\textcolor{stringliteral}{"la configuration ipv4 statique a échoué"});}
\DoxyCodeLine{421         \}}
\DoxyCodeLine{422     \}}
\DoxyCodeLine{423 }
\DoxyCodeLine{424     \textcolor{keywordflow}{if}(qProc-\/>state() != QProcess::NotRunning)}
\DoxyCodeLine{425         qProc-\/>kill();}
\DoxyCodeLine{426 }
\DoxyCodeLine{427     qProc-\/>deleteLater();}
\DoxyCodeLine{428 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}\label{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}} 
\index{X7GestConfig@{X7GestConfig}!startX7GestConfig@{startX7GestConfig}}
\index{startX7GestConfig@{startX7GestConfig}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{startX7GestConfig}{startX7GestConfig}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::start\+X7\+Gest\+Config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}{X7\+Gest\+Config\+::start\+X7\+Gest\+Config}}. 


\begin{DoxyItemize}
\item appelé à l\textquotesingle{}init de l\textquotesingle{}objet
\item appel \mbox{\hyperlink{class_x7_gest_config_a7de50f2def17dd31f02e5f9b7f3f9f70}{update\+Date\+Time\+Ntp()}}
\item creation d\textquotesingle{}un Qthread serial\+Thread 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{68 \{}
\DoxyCodeLine{69     log4cpp-\/>debug(\textcolor{stringliteral}{"startX7GestConfig"});}
\DoxyCodeLine{70     QSqlDatabase::addDatabase(\textcolor{stringliteral}{"QSQLITE"},bddSetupName);}
\DoxyCodeLine{71     QSqlDatabase::addDatabase(\textcolor{stringliteral}{"QSQLITE"},bddBadgeName);}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \textcolor{comment}{//setIpV4Config(QString("dhcp"),QString(),QString(),QString());}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 }
\DoxyCodeLine{76     \textcolor{comment}{//FIXME gérer l'activation du serveur NTP au lieu de la cadence ?}}
\DoxyCodeLine{77     timer\_ntp =\textcolor{keyword}{new} QTimer();}
\DoxyCodeLine{78     timer\_ntp-\/>setSingleShot(\textcolor{keyword}{true});}
\DoxyCodeLine{79     connect(timer\_ntp,SIGNAL(timeout()),\textcolor{keyword}{this},SLOT(\mbox{\hyperlink{class_x7_gest_config_a7de50f2def17dd31f02e5f9b7f3f9f70}{updateDateTimeNtp}}()));}
\DoxyCodeLine{80     \textcolor{comment}{//timer\_ntp-\/>start(60000);}}
\DoxyCodeLine{81 }
\DoxyCodeLine{82     \textcolor{comment}{// Instanciation du port serie 1 par defaut}}
\DoxyCodeLine{83     \_portSerieLecteur = \textcolor{keyword}{new} \mbox{\hyperlink{class_x7_port_serie}{X7PortSerie}}();}
\DoxyCodeLine{84     \_portSerieLecteur-\/>config(X7PortSerie::X7\_READER\_1);}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     \textcolor{comment}{// Déplacement du port serie sur un nouveau thread.}}
\DoxyCodeLine{87     QThread *serialThread = \textcolor{keyword}{new} QThread;}
\DoxyCodeLine{88     \_portSerieLecteur-\/>moveToThread(serialThread);}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     serialThread-\/>start();}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     QObject::connect(serialThread, SIGNAL(finished()), \_portSerieLecteur, SLOT(close()));}
\DoxyCodeLine{93     QObject::connect(qApp, SIGNAL(aboutToQuit()), serialThread, SLOT(quit()));}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     \textcolor{comment}{// Instanciation du port serie pour la config de la x7}}
\DoxyCodeLine{96     \_portSerieServiceDevice = \textcolor{keyword}{new} \mbox{\hyperlink{class_x7_port_serie}{X7PortSerie}}();}
\DoxyCodeLine{97     \_portSerieServiceDevice-\/>config(X7PortSerie::X7\_INTERNAL\_IO);}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \mbox{\hyperlink{class_x7_gest_config_a2800cf72efd5902e0ab829c667d18f89}{ouvrirBdd}}(bddSetupName);}
\DoxyCodeLine{100     \textcolor{comment}{//Lecteur de la Configuration}}
\DoxyCodeLine{101     \mbox{\hyperlink{class_x7_gest_config_af70c0aa761a8dcf3c59d34ce97585787}{readConfig}}();}
\DoxyCodeLine{102     \mbox{\hyperlink{class_x7_gest_config_a4cc994164f558d34504389942a27d173}{initHostName}}();}
\DoxyCodeLine{103 }
\DoxyCodeLine{104 }
\DoxyCodeLine{105     \textcolor{comment}{//Initialisation du lecteur correspondant a la config.}}
\DoxyCodeLine{106     X7GestLecteur::getInstance()-\/>initLecteur();    }
\DoxyCodeLine{107     X7CarteIO::getInstance()-\/>initCarteIOPort();}
\DoxyCodeLine{108 }
\DoxyCodeLine{109     \textcolor{comment}{// init du retro eclairage}}
\DoxyCodeLine{110     \textcolor{comment}{//x7GestConfig\_init\_divers();//doublon?}}
\DoxyCodeLine{111 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a7de50f2def17dd31f02e5f9b7f3f9f70}\label{class_x7_gest_config_a7de50f2def17dd31f02e5f9b7f3f9f70}} 
\index{X7GestConfig@{X7GestConfig}!updateDateTimeNtp@{updateDateTimeNtp}}
\index{updateDateTimeNtp@{updateDateTimeNtp}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{updateDateTimeNtp}{updateDateTimeNtp}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::update\+Date\+Time\+Ntp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_a7de50f2def17dd31f02e5f9b7f3f9f70}{X7\+Gest\+Config\+::update\+Date\+Time\+Ntp}}. 


\begin{DoxyItemize}
\item appelé à l\textquotesingle{}init \mbox{\hyperlink{class_x7_gest_config_a512a8e44939db0eb827dc056ef0cf78f}{start\+X7\+Gest\+Config()}} 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{703 \{}
\DoxyCodeLine{704 \textcolor{comment}{//Fonction reprise de la T2B}}
\DoxyCodeLine{705     log4cpp-\/>debug(\textcolor{stringliteral}{"updateDateTimeNtp"});}
\DoxyCodeLine{706     \textcolor{keywordtype}{int} x;}
\DoxyCodeLine{707     QChar type;}
\DoxyCodeLine{708     QString b;}
\DoxyCodeLine{709 }
\DoxyCodeLine{710     \textcolor{keywordflow}{if} (!serveur\_ntp.isEmpty() \&\& !serveur\_ntp.contains(\textcolor{charliteral}{' '}) )}
\DoxyCodeLine{711     \{}
\DoxyCodeLine{712         log4cpp-\/>debug(\textcolor{stringliteral}{"ntp not empty"});}
\DoxyCodeLine{713         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_x7_gest_config_a2665183dd5e9c1c22ec56455604d9e8d}{getIpLocal}}())}
\DoxyCodeLine{714         \{}
\DoxyCodeLine{715             log4cpp-\/>debug(\textcolor{stringliteral}{"ip not empty"});}
\DoxyCodeLine{716             \textcolor{keywordflow}{if} (!cadence\_ntp.isEmpty() \&\& !cadence\_ntp.contains(\textcolor{charliteral}{' '}))}
\DoxyCodeLine{717             \{}
\DoxyCodeLine{718                 log4cpp-\/>debug(\textcolor{stringliteral}{"cadence not empty"});}
\DoxyCodeLine{719                 \textcolor{keywordflow}{if} (cadence\_ntp.contains(\textcolor{charliteral}{'s'},Qt::CaseInsensitive)) type=\textcolor{charliteral}{'s'};}
\DoxyCodeLine{720                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cadence\_ntp.contains(\textcolor{charliteral}{'m'},Qt::CaseInsensitive)) type=\textcolor{charliteral}{'m'};}
\DoxyCodeLine{721                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cadence\_ntp.contains(\textcolor{charliteral}{'h'},Qt::CaseInsensitive)) type=\textcolor{charliteral}{'h'};}
\DoxyCodeLine{722                 \textcolor{keywordflow}{else} type=\textcolor{charliteral}{'j'};}
\DoxyCodeLine{723 }
\DoxyCodeLine{724                 b=cadence\_ntp;}
\DoxyCodeLine{725                 b.replace(type,\textcolor{charliteral}{' '},Qt::CaseInsensitive);}
\DoxyCodeLine{726                 x=b.section(\textcolor{charliteral}{' '},0,0).toInt();}
\DoxyCodeLine{727                 \textcolor{keywordflow}{if} (x<=0) x=1;}
\DoxyCodeLine{728                 \textcolor{keywordflow}{switch}(type.toLatin1())}
\DoxyCodeLine{729                 \{}
\DoxyCodeLine{730                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'s'}:}
\DoxyCodeLine{731                     \textcolor{keywordflow}{if} (x<=15) x=15;}
\DoxyCodeLine{732                     timer\_ntp-\/>start(x*1000);     \textcolor{comment}{// mise à l'heure tt les x * secondes}}
\DoxyCodeLine{733                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{734                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'m'}:}
\DoxyCodeLine{735                     timer\_ntp-\/>start(x*60*1000);     \textcolor{comment}{//  mise à l'heure tt les x * minute}}
\DoxyCodeLine{736                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{737                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'h'}:}
\DoxyCodeLine{738                     timer\_ntp-\/>start(x*3600*1000);       \textcolor{comment}{//  mise à l'heure tt les x * heure}}
\DoxyCodeLine{739                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{740                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'j'}:}
\DoxyCodeLine{741                     timer\_ntp-\/>start(24*3600*1000);     \textcolor{comment}{// mise à l'heure tt les jour)}}
\DoxyCodeLine{742                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{743                 \}}
\DoxyCodeLine{744                 \textcolor{comment}{//ntp\_hwclock\_w script qui fait  "ntpd -\/qnN -\/p \$1" puis "hwclock -\/w -\/u"}}
\DoxyCodeLine{745                 \textcolor{comment}{//mise à jour datetime par serveur ntp puis sauvegarde dans l'horloge interne t2b.}}
\DoxyCodeLine{746                 QString a=QString(\textcolor{stringliteral}{"./ntp\_hwclock\_w \%1"}).arg(serveur\_ntp);}
\DoxyCodeLine{747                 QProcess *qProc = \textcolor{keyword}{new} QProcess(\textcolor{keyword}{this});}
\DoxyCodeLine{748                 qProc-\/>startDetached(a);}
\DoxyCodeLine{749             \}}
\DoxyCodeLine{750             \textcolor{keywordflow}{else}}
\DoxyCodeLine{751             \{}
\DoxyCodeLine{752                 timer\_ntp-\/>start(24*3600*1000); \textcolor{comment}{// tous les jour}}
\DoxyCodeLine{753             \}}
\DoxyCodeLine{754         \}}
\DoxyCodeLine{755         \textcolor{keywordflow}{else}}
\DoxyCodeLine{756         \{}
\DoxyCodeLine{757             timer\_ntp-\/>start(5000);\textcolor{comment}{// reessai toutes les 5 secondes}}
\DoxyCodeLine{758         \}}
\DoxyCodeLine{759     \}}
\DoxyCodeLine{760 }
\DoxyCodeLine{761 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_ad3ff686432c6e8843c4f6b8d78d98254}\label{class_x7_gest_config_ad3ff686432c6e8843c4f6b8d78d98254}} 
\index{X7GestConfig@{X7GestConfig}!x7GestConfig\_init\_divers@{x7GestConfig\_init\_divers}}
\index{x7GestConfig\_init\_divers@{x7GestConfig\_init\_divers}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{x7GestConfig\_init\_divers()}{x7GestConfig\_init\_divers()}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+\_\+divers (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



\mbox{\hyperlink{class_x7_gest_config_ad3ff686432c6e8843c4f6b8d78d98254}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+\_\+divers}}. 


\begin{DoxyItemize}
\item mise à jour table divers 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{935 \{}
\DoxyCodeLine{936     log4cpp-\/>debug(\textcolor{stringliteral}{"x7GestConfig\_init\_divers"});}
\DoxyCodeLine{937     QString type\_ecran=\textcolor{stringliteral}{""};}
\DoxyCodeLine{938     QString backlight\_N1=\textcolor{stringliteral}{""};}
\DoxyCodeLine{939     QString delai\_N2=\textcolor{stringliteral}{""};}
\DoxyCodeLine{940     QString backlight\_N2=\textcolor{stringliteral}{""};}
\DoxyCodeLine{941     QString delai\_OFF=\textcolor{stringliteral}{""};}
\DoxyCodeLine{942     QString sleep\_mode=\textcolor{stringliteral}{""};}
\DoxyCodeLine{943     QSqlDatabase db = QSqlDatabase::addDatabase(\textcolor{stringliteral}{"QSQLITE"},\textcolor{stringliteral}{"divers\_setup"});}
\DoxyCodeLine{944     db.setDatabaseName(\textcolor{stringliteral}{"/var/x7/etc/database\_setup.db"});}
\DoxyCodeLine{945     \textcolor{keywordflow}{if} (db.open())}
\DoxyCodeLine{946     \{}
\DoxyCodeLine{947         log4cpp-\/>debug(\textcolor{stringliteral}{"Lecture table divers"});}
\DoxyCodeLine{948         QSqlQueryModel model;}
\DoxyCodeLine{949         model.setQuery(\textcolor{stringliteral}{"SELECT * FROM divers"},db);}
\DoxyCodeLine{950         \textcolor{keywordflow}{if} (model.rowCount())}
\DoxyCodeLine{951         \{}
\DoxyCodeLine{952             type\_ecran=model.record(0).value(\textcolor{stringliteral}{"ecran"}).toString();}
\DoxyCodeLine{953             backlight\_N1=model.record(0).value(\textcolor{stringliteral}{"backlight N1"}).toString();}
\DoxyCodeLine{954             delai\_N2=model.record(0).value(\textcolor{stringliteral}{"delai N2"}).toString();}
\DoxyCodeLine{955             backlight\_N2=model.record(0).value(\textcolor{stringliteral}{"backlight N2"}).toString();}
\DoxyCodeLine{956             delai\_OFF=model.record(0).value(\textcolor{stringliteral}{"delai OFF"}).toString();}
\DoxyCodeLine{957             sleep\_mode=model.record(0).value(\textcolor{stringliteral}{"sleep mode"}).toString();}
\DoxyCodeLine{958             \textcolor{keywordflow}{if}(backlight\_N1.toInt() < 1) backlight\_N1 = \textcolor{stringliteral}{"1"};}
\DoxyCodeLine{959             \textcolor{keywordflow}{if}(backlight\_N1.toInt() > 25) backlight\_N1 = \textcolor{stringliteral}{"25"};}
\DoxyCodeLine{960             \textcolor{keywordflow}{if}(backlight\_N2.toInt() < 1) backlight\_N2 = \textcolor{stringliteral}{"1"};}
\DoxyCodeLine{961             \textcolor{keywordflow}{if}(backlight\_N2.toInt() > 25) backlight\_N2 = \textcolor{stringliteral}{"25"};}
\DoxyCodeLine{962             X7CarteIO::getInstance()-\/>setBrightness(backlight\_N1.toInt());}
\DoxyCodeLine{963         \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{964             log4cpp-\/>debug(\textcolor{stringliteral}{"x7GestConfig\_init\_divers recréation données"});}
\DoxyCodeLine{965             QSqlQuery query(db);}
\DoxyCodeLine{966             query.exec(QString(\textcolor{stringliteral}{"DELETE from divers"}));}
\DoxyCodeLine{967             query.clear();}
\DoxyCodeLine{968             query.finish();}
\DoxyCodeLine{969             db.commit();}
\DoxyCodeLine{970             query.prepare(\textcolor{stringliteral}{"INSERT INTO divers (ecran, 'backlight N1', 'delai N2', 'backlight N2', 'delai OFF', 'sleep mode')"} \textcolor{stringliteral}{"VALUES (:ecran, :bl1, :delai, :bl2, :delai\_off, :sleep\_mode);"});}
\DoxyCodeLine{971             query.bindValue(\textcolor{stringliteral}{":ecran"}, \textcolor{stringliteral}{"0"});}
\DoxyCodeLine{972             query.bindValue(\textcolor{stringliteral}{":bl1"}, \textcolor{stringliteral}{"10"});}
\DoxyCodeLine{973             query.bindValue(\textcolor{stringliteral}{":delai"}, \textcolor{stringliteral}{""});}
\DoxyCodeLine{974             query.bindValue(\textcolor{stringliteral}{":bl2"}, \textcolor{stringliteral}{""});}
\DoxyCodeLine{975             query.bindValue(\textcolor{stringliteral}{":delai\_off"}, \textcolor{stringliteral}{""});}
\DoxyCodeLine{976             query.bindValue(\textcolor{stringliteral}{":sleep\_mode"}, \textcolor{stringliteral}{""});}
\DoxyCodeLine{977             query.exec();}
\DoxyCodeLine{978             query.finish();}
\DoxyCodeLine{979             db.commit();}
\DoxyCodeLine{980             db.close();}
\DoxyCodeLine{981         \}}
\DoxyCodeLine{982         model.clear();}
\DoxyCodeLine{983         model.deleteLater();}
\DoxyCodeLine{984         db.close();}
\DoxyCodeLine{985     \}}
\DoxyCodeLine{986 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a3545a3fcc3f89d31f964ae5d80ea0b8b}\label{class_x7_gest_config_a3545a3fcc3f89d31f964ae5d80ea0b8b}} 
\index{X7GestConfig@{X7GestConfig}!x7GestConfig\_init\_mode\_network@{x7GestConfig\_init\_mode\_network}}
\index{x7GestConfig\_init\_mode\_network@{x7GestConfig\_init\_mode\_network}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{x7GestConfig\_init\_mode\_network}{x7GestConfig\_init\_mode\_network}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+\_\+mode\+\_\+network (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_a3545a3fcc3f89d31f964ae5d80ea0b8b}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+\_\+mode\+\_\+network}}. 


\begin{DoxyItemize}
\item récupère informations réseau (dns ...) pour affichage I\+HM
\item appel signal\+\_\+ihm\+\_\+init\+\_\+mode\+\_\+network() 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{498 \{}
\DoxyCodeLine{499     log4cpp-\/>debug(\textcolor{stringliteral}{"init\_mode\_network"});}
\DoxyCodeLine{500     QHostAddress ip,netmask,gateway;}
\DoxyCodeLine{501     QString dns1,dns2;}
\DoxyCodeLine{502 }
\DoxyCodeLine{503     QString a= QString(\textcolor{stringliteral}{"ip route"});}
\DoxyCodeLine{504     QProcess *qProc = \textcolor{keyword}{new} QProcess(\textcolor{keyword}{this});}
\DoxyCodeLine{505     qProc-\/>start(a);}
\DoxyCodeLine{506     qProc-\/>waitForReadyRead();}
\DoxyCodeLine{507     QString tmp = qProc-\/>readAll(); \textcolor{comment}{// tmp = "default via 172.16.66.1 dev eth0 <cr><lf>172.16.66.0/23 dev eth0 proto kernel scope link src 172.16.66.33"}}
\DoxyCodeLine{508     qProc-\/>close();}
\DoxyCodeLine{509     qProc-\/>deleteLater();}
\DoxyCodeLine{510 }
\DoxyCodeLine{511     gateway=tmp.section(\textcolor{charliteral}{' '},2,2);}
\DoxyCodeLine{512 }
\DoxyCodeLine{513     QString nom=supervision\_thread.supervision.time2bii\_name;}
\DoxyCodeLine{514 }
\DoxyCodeLine{515     ip.clear();}
\DoxyCodeLine{516     QList<QNetworkInterface> interfaces = QNetworkInterface::allInterfaces();}
\DoxyCodeLine{517     \textcolor{keywordflow}{foreach}(\textcolor{keyword}{const} QNetworkInterface \& interface, interfaces)}
\DoxyCodeLine{518     \{}
\DoxyCodeLine{519         \textcolor{keywordflow}{if} (interface.name().contains(\textcolor{stringliteral}{"eth"}) || interface.name().contains(\textcolor{stringliteral}{"wlan"}) || interface.name().contains(\textcolor{stringliteral}{"ppp"}))}
\DoxyCodeLine{520         \{}
\DoxyCodeLine{521             QList<QNetworkAddressEntry> entries = interface.addressEntries();}
\DoxyCodeLine{522             \textcolor{keywordflow}{if} (!entries.isEmpty())}
\DoxyCodeLine{523             \{}
\DoxyCodeLine{524                 QNetworkAddressEntry entry = entries.first();}
\DoxyCodeLine{525                 ip = entry.ip();}
\DoxyCodeLine{526                 netmask =entry.netmask();}
\DoxyCodeLine{527             \}}
\DoxyCodeLine{528         \}}
\DoxyCodeLine{529     \}}
\DoxyCodeLine{530 }
\DoxyCodeLine{531     QFile in(\textcolor{stringliteral}{"/etc/resolv.conf"});}
\DoxyCodeLine{532     \textcolor{keywordflow}{if} (in.open( QFile::ReadOnly))}
\DoxyCodeLine{533     \{}
\DoxyCodeLine{534         QTextStream stream\_in(\&in);}
\DoxyCodeLine{535         QString s;}
\DoxyCodeLine{536         \textcolor{keywordtype}{int} i=0;}
\DoxyCodeLine{537         \textcolor{keywordflow}{do}\{}
\DoxyCodeLine{538             s = stream\_in.readLine();}
\DoxyCodeLine{539             \textcolor{keywordflow}{if} (s.contains(\textcolor{stringliteral}{"nameserver"}))}
\DoxyCodeLine{540             \{}
\DoxyCodeLine{541                 \textcolor{keywordflow}{if} (i==0) dns1=s.section(\textcolor{charliteral}{' '},1,1);}
\DoxyCodeLine{542                 \textcolor{keywordflow}{else}      dns2=s.section(\textcolor{charliteral}{' '},1,1);}
\DoxyCodeLine{543                 i++;}
\DoxyCodeLine{544             \}}
\DoxyCodeLine{545         \} \textcolor{keywordflow}{while} (!s.isNull());}
\DoxyCodeLine{546 }
\DoxyCodeLine{547         in.close();}
\DoxyCodeLine{548     \}}
\DoxyCodeLine{549     \textcolor{comment}{//appel mainView.qml ihm\_init\_mode\_network}}
\DoxyCodeLine{550     signal\_ihm\_init\_mode\_network(nom,ip.toString(),netmask.toString(),gateway.toString(),dns1,dns2);}
\DoxyCodeLine{551 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_aca8330d10e557e3bc418367bb6d44429}\label{class_x7_gest_config_aca8330d10e557e3bc418367bb6d44429}} 
\index{X7GestConfig@{X7GestConfig}!x7GestConfig\_initWifi@{x7GestConfig\_initWifi}}
\index{x7GestConfig\_initWifi@{x7GestConfig\_initWifi}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{x7GestConfig\_initWifi}{x7GestConfig\_initWifi}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+Wifi (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_aca8330d10e557e3bc418367bb6d44429}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+init\+Wifi}}. 


\begin{DoxyItemize}
\item appel signal\+\_\+ihm\+\_\+init\+\_\+wifi() 
\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{688 \{}
\DoxyCodeLine{689     log4cpp-\/>debug(\textcolor{stringliteral}{"x7GestConfig\_initWifi"});}
\DoxyCodeLine{690     QString ssid;QString psk;}
\DoxyCodeLine{691 }
\DoxyCodeLine{692     \textcolor{comment}{//TODO recupérer la configuration du wifi par connmanctl}}
\DoxyCodeLine{693 }
\DoxyCodeLine{694     \textcolor{comment}{//signal\_ihm\_init\_wifi à corriger et tester}}
\DoxyCodeLine{695     signal\_ihm\_init\_wifi(ssid,psk);}
\DoxyCodeLine{696 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a5621623ea5470165b06a90b4286ec6e5}\label{class_x7_gest_config_a5621623ea5470165b06a90b4286ec6e5}} 
\index{X7GestConfig@{X7GestConfig}!x7GestConfig\_set\_lecteur\_badge@{x7GestConfig\_set\_lecteur\_badge}}
\index{x7GestConfig\_set\_lecteur\_badge@{x7GestConfig\_set\_lecteur\_badge}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{x7GestConfig\_set\_lecteur\_badge()}{x7GestConfig\_set\_lecteur\_badge()}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+\_\+lecteur\+\_\+badge (\begin{DoxyParamCaption}\item[{Q\+String}]{lecteur,  }\item[{Q\+String}]{option,  }\item[{Q\+String}]{masque,  }\item[{Q\+String}]{format }\end{DoxyParamCaption})}



(N\+O\+T\+\_\+\+U\+S\+ED) \mbox{\hyperlink{class_x7_gest_config_a5621623ea5470165b06a90b4286ec6e5}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+\_\+lecteur\+\_\+badge}} 


\begin{DoxyParams}{Parameters}
{\em lecteur} & \\
\hline
{\em option} & \\
\hline
{\em masque} & \\
\hline
{\em format} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{771 \{}
\DoxyCodeLine{772     \textcolor{comment}{//FIXME utiliser l'objet badge}}
\DoxyCodeLine{773 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_aac3c14a50328b282a91ba0a7ed0b439e}\label{class_x7_gest_config_aac3c14a50328b282a91ba0a7ed0b439e}} 
\index{X7GestConfig@{X7GestConfig}!x7GestConfig\_set\_mode\_network@{x7GestConfig\_set\_mode\_network}}
\index{x7GestConfig\_set\_mode\_network@{x7GestConfig\_set\_mode\_network}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{x7GestConfig\_set\_mode\_network}{x7GestConfig\_set\_mode\_network}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+\_\+mode\+\_\+network (\begin{DoxyParamCaption}\item[{int}]{mode,  }\item[{Q\+String}]{nom,  }\item[{Q\+String}]{ip,  }\item[{Q\+String}]{netmask,  }\item[{Q\+String}]{gateway,  }\item[{Q\+String}]{dns1,  }\item[{Q\+String}]{dns2 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_aac3c14a50328b282a91ba0a7ed0b439e}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+\_\+mode\+\_\+network}}. 


\begin{DoxyItemize}
\item methode pour activer le réseau D\+H\+CP ou statique IP
\item appel \mbox{\hyperlink{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}{set\+Ip\+V4\+Config()}}
\item appel \mbox{\hyperlink{class_x7_gest_config_a3545a3fcc3f89d31f964ae5d80ea0b8b}{x7\+Gest\+Config\+\_\+init\+\_\+mode\+\_\+network()}} à l\textquotesingle{}init 
\begin{DoxyParams}{Parameters}
{\em mode} & \\
\hline
{\em nom} & \\
\hline
{\em ip} & \\
\hline
{\em netmask} & \\
\hline
{\em gateway} & \\
\hline
{\em dns1} & \\
\hline
{\em dns2} & \\
\hline
\end{DoxyParams}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{445 \{}
\DoxyCodeLine{446 }
\DoxyCodeLine{447     configIpV4 config;}
\DoxyCodeLine{448 }
\DoxyCodeLine{449     config.ip = ip;}
\DoxyCodeLine{450     config.netmask = netmask;}
\DoxyCodeLine{451     config.gateway = gateway;}
\DoxyCodeLine{452     config.dns << dns1 << dns2 ;}
\DoxyCodeLine{453 }
\DoxyCodeLine{454     \textcolor{keywordflow}{if}(mode==0)}
\DoxyCodeLine{455     \{}
\DoxyCodeLine{456         \textcolor{comment}{//0 DHCP}}
\DoxyCodeLine{457         \mbox{\hyperlink{class_x7_gest_config_af0686ac04fa81c8c2a082ccfe0124561}{setHostName}}(nom);}
\DoxyCodeLine{458 }
\DoxyCodeLine{459 }
\DoxyCodeLine{460         \mbox{\hyperlink{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}{setIpV4Config}}(modeIpV4::DHCP,config);}
\DoxyCodeLine{461 }
\DoxyCodeLine{462     \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(mode==1)}
\DoxyCodeLine{463     \{}
\DoxyCodeLine{464         \textcolor{comment}{//1 IPFIX}}
\DoxyCodeLine{465         \mbox{\hyperlink{class_x7_gest_config_af0686ac04fa81c8c2a082ccfe0124561}{setHostName}}(nom);}
\DoxyCodeLine{466         \mbox{\hyperlink{class_x7_gest_config_af4819cc351bc3db5ddc64611d29ad4ed}{setIpV4Config}}(modeIpV4::FIX,config);}
\DoxyCodeLine{467 }
\DoxyCodeLine{468         \textcolor{comment}{//FIXME lire les dns dans connman}}
\DoxyCodeLine{469         \textcolor{keywordflow}{if} (!dns1.isEmpty() || !dns2.isEmpty())}
\DoxyCodeLine{470         \{}
\DoxyCodeLine{471             QFile outdns(\textcolor{stringliteral}{"/etc/resolv.conf"});}
\DoxyCodeLine{472             QTextStream stream\_out(\&outdns);}
\DoxyCodeLine{473             QString dns;}
\DoxyCodeLine{474             \textcolor{keywordflow}{if} (!dns1.isEmpty()) dns.append(\textcolor{stringliteral}{"nameserver "}+dns1+\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{475             \textcolor{keywordflow}{if} (!dns2.isEmpty()) dns.append(\textcolor{stringliteral}{"nameserver "}+dns2+\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{476             outdns.open( QFile::WriteOnly);}
\DoxyCodeLine{477             stream\_out << dns;}
\DoxyCodeLine{478             stream\_out.flush();}
\DoxyCodeLine{479             outdns.close();}
\DoxyCodeLine{480         \}}
\DoxyCodeLine{481 }
\DoxyCodeLine{482 }
\DoxyCodeLine{483     \}\textcolor{keywordflow}{else}}
\DoxyCodeLine{484     \{}
\DoxyCodeLine{485         \textcolor{comment}{//INIT ?}}
\DoxyCodeLine{486         \mbox{\hyperlink{class_x7_gest_config_a3545a3fcc3f89d31f964ae5d80ea0b8b}{x7GestConfig\_init\_mode\_network}}();}
\DoxyCodeLine{487     \}}
\DoxyCodeLine{488 }
\DoxyCodeLine{489 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_x7_gest_config_a76c52d0d7de3c074b3ef2c9fac977993}\label{class_x7_gest_config_a76c52d0d7de3c074b3ef2c9fac977993}} 
\index{X7GestConfig@{X7GestConfig}!x7GestConfig\_setWifi@{x7GestConfig\_setWifi}}
\index{x7GestConfig\_setWifi@{x7GestConfig\_setWifi}!X7GestConfig@{X7GestConfig}}
\doxysubsubsection{\texorpdfstring{x7GestConfig\_setWifi}{x7GestConfig\_setWifi}}
{\footnotesize\ttfamily void X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+Wifi (\begin{DoxyParamCaption}\item[{Q\+String}]{ssid,  }\item[{Q\+String}]{psk }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



\mbox{\hyperlink{class_x7_gest_config_a76c52d0d7de3c074b3ef2c9fac977993}{X7\+Gest\+Config\+::x7\+Gest\+Config\+\_\+set\+Wifi}}. 


\begin{DoxyItemize}
\item appel \mbox{\hyperlink{class_x7_gest_config_aca8330d10e557e3bc418367bb6d44429}{x7\+Gest\+Config\+\_\+init\+Wifi()}}
\item appelé à l\textquotesingle{}init de \mbox{\hyperlink{class_nom_controller_a8bb298a65a56c2f8f11e4840c3b8357b}{Nom\+Controller\+::\+Nom\+Controller()}} 
\begin{DoxyParams}{Parameters}
{\em ssid} & \\
\hline
{\em psk} & \\
\hline
\end{DoxyParams}

\end{DoxyItemize}
\begin{DoxyCode}{0}
\DoxyCodeLine{671 \{}
\DoxyCodeLine{672     log4cpp-\/>debug(\textcolor{stringliteral}{"x7GestConfig\_setWifi"});}
\DoxyCodeLine{673     \textcolor{comment}{//Encore une grosse blague ssid= "init" on fait l'init de l'ecran via un signal.}}
\DoxyCodeLine{674     \textcolor{keywordflow}{if} (ssid==\textcolor{stringliteral}{"init"}) \{}
\DoxyCodeLine{675         log4cpp-\/>debug(\textcolor{stringliteral}{"x7GestConfig\_initWifi"});}
\DoxyCodeLine{676         \mbox{\hyperlink{class_x7_gest_config_aca8330d10e557e3bc418367bb6d44429}{x7GestConfig\_initWifi}}();}
\DoxyCodeLine{677         \textcolor{keywordflow}{return};}
\DoxyCodeLine{678     \}}
\DoxyCodeLine{679 }
\DoxyCodeLine{680     \textcolor{comment}{//TODO configuration WIFI via connmanctl}}
\DoxyCodeLine{681 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{x7gestconfig_8h}{x7gestconfig.\+h}}\item 
\mbox{\hyperlink{x7gestconfig_8cpp}{x7gestconfig.\+cpp}}\end{DoxyCompactItemize}
